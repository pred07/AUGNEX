# Active Directory Architecture Overview

## 1. Unit Brief: The Corporate Kingdom
95% of Fortune 500 companies use Active Directory (AD). It centralizes identity management. If you hack AD, you hack the entire company.

## 2. Real-World Relevance
*   **Domain Admin**: The God Key. Access to every computer, every file, every email.
*   **Ransomware**: Modern ransomware looks for the Domain Controller (DC) to deploy the encryptor to 10,000 PCs simultaneously via Group Policy (GPO).

## 3. Core Concepts

### The Domain
A boundary of trust.
*   **DC (Domain Controller)**: The server holding the database (`ntds.dit`) and keys (KDC).
*   **Member Server**: A server joined to the domain.
*   **Forest**: A collection of Domains.

### Objects
*   **Users**: Employees.
*   **Computers**: Laptops/Servers.
*   **Groups**: Collections of users (`Domain Admins`).
*   **GPO (Group Policy Object)**: Rules applied to computers (e.g., "Disable Firewall").

### Authentication (Kerberos)
AD uses Kerberos, a ticket-based system.
1.  **TGT (Ticket Granting Ticket)**: Proof you are you.
2.  **TGS (Ticket Granting Service)**: Proof you are allowed to access specific service (e.g., File Share).

## 4. Practical Examples

### The Trust Flow
User logs in -> PC talks to DC -> DC gives TGT.
User wants to access `\\FileShare` -> PC sends TGT to DC -> DC gives TGS for `cifs/fileshare`.
PC sends TGS to FileServer. FileServer lets User in.

### Forest Trusts
Company A buys Company B.
They create a "Two-Way Trust".
*   **Risk**: If I hack Company A, I can cross the trust link and hack Company B.

## 5. Common Mistakes Beginners Make
*   **Thinking Local Admin is enough**: Local Admin only owns one box. Domain Admin owns them all.
*   **Confusing LDAP and AD**: AD *uses* LDAP as a protocol to query the database.

## 6. Key Takeaways
*   **Identity is the Perimeter**: Firewalls don't matter inside AD. The only wall is the Access Control List.
*   **Kerberos is King**: Learn how tickets work.
