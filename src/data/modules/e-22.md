# SQL Injection Concepts and Exploitation

## 1. Unit Brief: Owning the Database
SQL Injection (SQLi) allows you to interfere with the queries an application makes to its database. It allows you to view data you aren't normally able to retrieve (passwords, emails) or even modify/delete it. It is the King of potential impact.

## 2. Real-World Relevance
Dropping the database. Stealing 100 million credit cards. Bypassing login panels. All possible with SQLi.

## 3. Core Concepts

### The Flaw
Code: `query = "SELECT * FROM users WHERE user = '" + input + "'"`
Input: `admin' --`
Result: `SELECT * FROM users WHERE user = 'admin' --'`
The `--` comments out the rest of the query (like the password check). You are logged in as admin.

### Types of SQLi
1.  **In-Band (Classic)**: You see the results on the screen. (e.g., UNION based).
2.  **Error-Based**: The database throws a verbose error revealing its structure.
3.  **Blind**: You see no output changes. You ask True/False questions.
    *   `id=1 AND 1=1` (Page loads normally).
    *   `id=1 AND 1=2` (Page is blank).
    *   Conclusion: It is vulnerable.
4.  **Time-Based Blind**: You ask the DB to sleep. `id=1'; SLEEP(10)--`. If the page takes 10s to load, you have control.

## 4. Practical Examples

### Authentication Bypass
Field: Username
Payload: `admin' OR 1=1 --`
*   **Logic**: "Log me in if user is admin OR if 1 equals 1".
*   **Result**: 1 always equals 1. Login Logic is True. Access Granted.

### Union-Based Dumping
URL: `site.com/products?id=1`
Payload: `1 UNION SELECT username, password FROM users`
*   **Result**: Instead of product details, the page displays a list of usernames and passwords.

### Using SQLMap
The automated tool for this.
```bash
$ sqlmap -u "http://site.com/page?id=1" --dbs
```
*   **Power**: It detects the db type, the injection type, and dumps the tables automatically.

## 5. Common Mistakes Beginners Make
*   **Not counting columns**: In UNION attacks, the injected query must have the *exact* same number of columns as the original query.
*   **GET vs POST**: Trying to exploit a URL parameter when the vuln is in the Login Form (POST body).

## 6. Key Takeaways
*   **High Impact**: Usually Critical severity.
*   **Prevention**: Parametrized Queries (Prepared Statements) solve this 100%. If you see SQLi, it's bad coding.
