# Authorization Attacks (IDOR and Access Control)

## 1. Orientation

### What this module covers
This module covers **IDOR** (Insecure Direct Object Reference). The art of changing `id=10` to `id=11` and seeing someone else's data.

### Fit in the Learning Path
IDORs are extremely common and often critical (PII leakage). They represent a failure of Authorization (Can I access this?), not Authentication (Who am I?).

### Learning Objectives
By the end of this module, you should understand:
*   **IDOR**: The concept.
*   **Broken Object Level Authorization (BOLA)**: The API term for IDOR.
*   **Horizontal** vs **Vertical** Privilege Escalation.

---

## 2. Core Content

### The Mechanism
Request: `GET /invoice/12345`
*   Server checks: "Is user logged in?" -> Yes.
*   Server returns Invoice 12345.
*   **FAILURE**: Server *forgot* to check "Does this user OWN Invoice 12345?"

### Privilege Escalation
1.  **Horizontal**: Accessing data of a peer (User A -> User B).
2.  **Vertical**: Accessing data of a superior (User -> Admin).

---

## 3. Guided Practice

### Hunting IDORs
**Pattern Matching**: Look for anything that looks like an ID.
*   Sequential: `user_id=100` (Easy).
*   Encoded: `user_id=MTAw` (Base64 for 100).
*   UUID: `user_id=550e8400-e29b...` (Harder to guess, but if leaked, still exploitable).

**Attack Workflow**:
1.  Create two accounts (Attacker and Victim).
2.  Log in as Attacker.
3.  Find a request containing Attacker's ID.
4.  Change ID to Victim's ID.
5.  If you see Victim's data -> **IDOR**.

---

## 4. Reflection Check

1.  **UUIDs**: Do UUIDs fix IDOR? (No. They prevent *Enumeration* (guessing), but if I find a UUID in a URL or JS file, I can still use it. Access Control must be enforced on the server).
2.  **Impact**: Why is IDOR on a "Change Password" endpoint critical? (Account Takeover. I change Your password).
3.  **Automation**: Can scanners find IDORs? (Rarely. The scanner doesn't know which data belongs to which user. It needs a human or complex configuration).

---

## 5. Completion Criteria

This module is complete when:
1.  You can define IDOR.
2.  You understand why UUIDs are better than Integers (Anti-Enumeration).
3.  You verify Authorization on every single endpoint that takes an ID.
