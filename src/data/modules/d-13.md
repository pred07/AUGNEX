# Centralized Logging Concepts

## 1. Orientation

### What this module covers
This module solves the problem of "Too Many Logs". We introduce **Syslog Servers** and the **SIEM** (Security Information and Event Management).

### Fit in the Learning Path
You cannot SSH into 5,000 servers to check logs daily. You need a single pane of glass.

### Learning Objectives
By the end of this module, you should understand:
*   **Aggregation**: Collecting from everywhere.
*   **Normalization**: Converting different formats to one standard.
*   **Correlation**: Linking events.

---

## 2. Core Content

### The Pipeline
1.  **Shipper**: A tiny agent on the Endpoint (e.g., Filebeat, Splunk Forwarder). Reads the local log and pushes it.
2.  **Broker / Buffer**: (Optional) Kafka/Redis. Queues logs so the database doesn't crash during spikes.
3.  **Indexer (SIEM)**: Elasticsearch / Splunk. Stores data for searching.
4.  **Visualizer**: Kibana / Dashboard. Graphs and Charts.

### Normalization
*   Linux says: `user=root`.
*   Windows says: `AccountName=Administrator`.
*   SIEM says: `user_name` (Standardized field).
    *   *Why?* So you can search `user_name=*` and get both.

---

## 3. Guided Practice

### The Correlation Rule
**Objective**: Detect "Impossible Travel".

**Rule Logic**:
```sql
SELECT user FROM logins
GROUP BY user
HAVING COUNT(DISTINCT country) > 1
AND TIME_DIFF < 1 HOUR
```
*   **Result**: If Alice logs in from NY and London within 10 minutes, alert.

**Why SIEM?**:
You cannot do this query if the logs are on separate servers.

---

## 4. Reflection Check

1.  **Latency**: What happens if logs arrive 1 hour late? (Real-time detection fails. The attacker is already gone).
2.  **Cost**: Why does Splunk cost so much? (Because parsing and indexing petabytes of text is computationally expensive).
3.  **Filter**: Should you log *everything*? (No. "Filtered Logging". Drop debug data at the source to save money).

---

## 5. Completion Criteria

This module is complete when:
1.  You can draw the flow: Endpoint -> Shipper -> SIEM -> Analyst.
2.  You understand why Normalization (Schema) is painful but necessary.
3.  You recognize names like **Splunk**, **ELK Stack**, and **Graylog**.
