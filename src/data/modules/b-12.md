# Bash Scripting for Security Automation

## 1. Orientation

### What this module covers
The `Bash` shell is the command interface for Linux. Scripting in Bash allows you to automate tedious tasks, chain tools together, and process large text files. For a hacker/engineer, Bash fluency is non-negotiable.

### Learning Objectives
*   Automate repetitive terminal commands.
*   Master `stdin`, `stdout`, and `stderr` (Redirection).
*   Use pipes `|` to chain tools.
*   Perform text processing with `grep`, `awk`, and `cut`.

---

## 2. Core Content

### The Shebang
Every script starts with `#!/bin/bash`. This tells the system which interpreter to use.

### Variables & Loops
```bash
#!/bin/bash
IP_PREFIX="192.168.1"
for i in {1..254}; do
    ping -c 1 $IP_PREFIX.$i > /dev/null
    if [ $? -eq 0 ]; then
        echo "Host $IP_PREFIX.$i is UP"
    fi
done
```
*   `$?` holds the exit status of the last command (0 = Success).

### The Power of Pipes (`|`)
Pipes pass the output of one command as input to the next.
*   *Example:* Find all active web connections.
    `netstat -antp | grep ESTABLISHED | grep :80`

### Text Processing Trinity
1.  **Grep:** Search. `grep "Error" /var/log/syslog`
2.  **Cut:** Slice columns. `cut -d ":" -f 1 /etc/passwd` (Get usernames).
3.  **Awk:** Advanced formatting. `ps aux | awk '{print $1, $11}'` (Print User and Process).

---

## 3. Lab: The Log Parser

### Task
You have an apache access log. Find the Top 5 IP addresses attempting to access `admin.php`.

**Command:**
```bash
cat access.log | grep "admin.php" | awk '{print $1}' | sort | uniq -c | sort -nr | head -n 5
```
**Breakdown:** Filter for page -> Extract IP -> Sort for grouping -> Count unique -> Sort numerically reverse -> Top 5.

---

## 4. Reflection
1.  Why use `bash` instead of `python`? (For quick system interactions and piping existing binary tools, Bash is faster to write).
2.  What does `2>&1` mean? (Redirect Stderr to Stdout).
