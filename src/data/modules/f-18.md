# Pipes, Redirection, and Environment Variables

## 1. Orientation

### What this module covers
This module covers "Chaining". How to take the output of one tool and feed it into another. It also explains Environment Variables (`$PATH`).

### Fit in the Learning Path
This is the "Unix Philosophy": Write programs that do one thing well, and work together. You rarely run just one command; you run a pipeline.

### Learning Objectives
By the end of this module, you should understand:
*   **Pipes (`|`)**: Connecting tools.
*   **Redirection (`>`, `>>`)**: Saving to files.
*   **Env Vars**: Dynamic values like `$USER` and `$PATH`.

---

## 2. Core Content

### Streams
Every program has three channels:
1.  **stdin (0)**: Input (Your keyboard).
2.  **stdout (1)**: Output (The screen).
3.  **stderr (2)**: Error messages (The screen).

### The Operators
*   **`|` (Pipe)**: Takes stdout of Left and puts it into stdin of Right.
    *   `cat file.txt | grep "password"`
*   **`>` (Overwrite)**: Saves stdout to a file (Deletes old content).
*   **`>>` (Append)**: Adds stdout to the end of a file.

### Environment Variables
Global variables that affect how programs run.
*   **$PATH**: A list of folders. When you type `ls`, Linux looks in these folders for the `ls` binary.

---

## 3. Guided Practice

### Advanced Chaining
We will combine list, search, and save.

**Step 1: The Pipe**
List all files in `/etc` and find ones containing "config".
```bash
ls /etc | grep config
```

**Step 2: Redirection**
Save that list to a file for evidence.
```bash
ls /etc | grep config > evidence.txt
cat evidence.txt
```

**Step 3: Appending**
Add the date to the bottom of the evidence.
```bash
date >> evidence.txt
cat evidence.txt
```

**Step 4: Inspecting PATH**
See where your system looks for tools.
```bash
echo $PATH
```

---

## 4. Reflection Check

1.  **Path Hijacking**: If I create a malicious script named `ls` and put it in a folder *earlier* in the `$PATH` than the real `/bin/ls`, what happens?
2.  **Silence**: What does `command > /dev/null 2>&1` do? (Hint: Sends both Output and Errors to the void).
3.  **Logs**: Why do attackers redirect their history file to `/dev/null`?

---

## 5. Completion Criteria

This module is complete when:
1.  You can explain the difference between `>` and `>>`.
2.  You have successfully piped `ls` into `grep`.
3.  You understand that `$PATH` determines which programs you can run.
