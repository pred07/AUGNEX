# Visibility as a Security Requirement

## 1. Orientation

### What this module covers
This module addresses the fundamental challenge of security visibility—you cannot protect what you cannot see. We examine asset inventory, shadow IT, IoT risks, BYOD challenges, and the critical difference between north-south and east-west traffic monitoring.

### Fit in the Learning Path
Every advanced security capability depends on knowing what exists on your network. Threat detection, vulnerability management, and incident response all fail when assets are invisible to security teams.

### Learning Objectives
By the end of this module, you will:
*   Understand the importance of comprehensive asset inventory
*   Recognize shadow IT patterns and their security implications
*   Distinguish between north-south and east-west traffic visibility
*   Identify common visibility gaps and remediation approaches

---

## 2. Core Content

### Mental Model: The Known Unknown Problem

**How professionals think about this:**
Security operates on the assumption that all assets are known. Reality violates this assumption constantly. The gap between assumed and actual assets is where breaches occur.

```
THE VISIBILITY PROBLEM:

┌─────────────────────────────────────────────────────────────────────┐
│                        IT/SECURITY KNOWS                            │
│                                                                     │
│  ┌─────────────────────────────────────────────────────────────┐   │
│  │  Official Assets                                             │   │
│  │  • Managed workstations (1,200)                              │   │
│  │  • Corporate servers (150)                                   │   │
│  │  • Network infrastructure (40)                               │   │
│  │  • Cloud instances (80 - maybe?)                             │   │
│  └─────────────────────────────────────────────────────────────┘   │
│                                                                     │
├─────────────────────────────────────────────────────────────────────┤
│                        IT/SECURITY DOESN'T KNOW                     │
│                                                                     │
│  ┌─────────────────────────────────────────────────────────────┐   │
│  │  Shadow IT                                                   │   │
│  │  • Marketing's AWS account                                    │   │
│  │  • Developer's test server under desk                        │   │
│  │  • Finance's own cloud backup                                │   │
│  │  • Personal Dropbox syncing sensitive files                  │   │
│  ├─────────────────────────────────────────────────────────────┤   │
│  │  IoT / OT                                                    │   │
│  │  • Smart TVs in conference rooms                             │   │
│  │  • Building HVAC controls                                     │   │
│  │  • Security cameras                                          │   │
│  │  • Smart printers                                            │   │
│  │  • Plant floor PLCs                                          │   │
│  ├─────────────────────────────────────────────────────────────┤   │
│  │  BYOD                                                        │   │
│  │  • Personal phones on WiFi                                   │   │
│  │  • Personal laptops                                          │   │
│  │  • Contractors' equipment                                    │   │
│  └─────────────────────────────────────────────────────────────┘   │
│                                                                     │
│  THIS IS WHERE BREACHES HAPPEN                                      │
│                                                                     │
└─────────────────────────────────────────────────────────────────────┘
```

### Asset Inventory Reality

**The inventory accuracy problem:**

| Inventory Accuracy | Result |
|-------------------|--------|
| 100% | Theoretical perfect |
| 90% | Still 10% unknown = breach risk |
| 80% | Typical enterprise reality |
| 60% | Common after mergers/acquisitions |

**What good inventory captures:**

```
ASSET INVENTORY REQUIREMENTS:

Hardware Assets:
├── IP address (current/historical)
├── MAC address
├── Physical location
├── Owner/responsible party
├── Business function
├── Criticality rating
└── Network zone

Software Assets:
├── Operating system + version
├── Applications installed
├── Patch level
├── Licensing status
└── Security agent status

Cloud Assets:
├── Provider (AWS/Azure/GCP)
├── Account owner
├── Region/availability zone
├── Instance type
├── Security group configuration
└── Access controls
```

**Discovery methods:**

| Method | Discovers | Limitations |
|--------|-----------|-------------|
| **Active scanning** | Everything responding | May miss firewalled devices |
| **Passive monitoring** | Active network devices | Misses inactive devices |
| **Agent-based** | Detailed OS/app info | Only on managed devices |
| **Cloud APIs** | Cloud instances | Each provider separate |
| **DHCP/DNS logs** | New devices | Only on corporate network |

### Shadow IT

**Why it exists:**
```
SHADOW IT ROOT CAUSES:

1. SLOW IT PROCESSES
   User: "I need a file share"
   IT: "Submit a ticket, wait 3 weeks"
   User: Creates Dropbox account

2. INADEQUATE TOOLS
   User: "Corporate tools don't do X"
   IT: "Use the approved system"
   User: Signs up for unapproved SaaS

3. BUDGET BARRIERS
   Department: "We need this tool"
   IT: "That's not in the budget"
   Department: Uses personal credit card

4. IGNORANCE
   User: "IT doesn't need to know about this"
   Reality: That's a shadow server on the network
```

**Shadow IT risks:**

| Risk | Example |
|------|---------|
| **No patching** | Unmanaged server never patched |
| **No monitoring** | Attacks not detected |
| **No backup** | Data loss |
| **Credential exposure** | Personal accounts, password reuse |
| **Compliance violations** | Data in unauthorized locations |
| **Lateral movement path** | Unprotected entry point |

**Discovery approaches:**
```bash
# Cloud Access Security Broker (CASB)
# Discovers SaaS applications by monitoring egress traffic

# Network traffic analysis
# Identifies unknown cloud services

# Finance/expense auditing
# Find credit card charges for cloud services

# Active network scanning
# Discover unknown devices
nmap -sn 10.0.0.0/8  # Discovery scan

# DHCP analysis
# New devices requesting addresses
```

### North-South vs East-West Traffic

**The blind spot:**

```
TRAFFIC FLOW VISIBILITY:

NORTH-SOUTH (Traditional monitoring)
════════════════════════════════════

              INTERNET
                  │
                  │ ← Firewall logs this
                  ▼
            ┌──────────┐
            │ FIREWALL │ ← IDS watches this
            └────┬─────┘
                 │
                 ▼
           INTERNAL NETWORK


EAST-WEST (Often invisible)
════════════════════════════════════

  ┌──────────┐          ┌──────────┐
  │ SERVER A │◄────────►│ SERVER B │
  └──────────┘          └──────────┘
       ▲                      ▲
       │                      │
       ▼                      ▼
  ┌──────────┐          ┌──────────┐
  │ SERVER C │◄────────►│ SERVER D │
  └──────────┘          └──────────┘
  
  This traffic NEVER touches the firewall
  Traditional perimeter doesn't see it
  Lateral movement happens here
```

**Why east-west matters:**

| Attack Phase | Traffic Direction |
|--------------|------------------|
| Initial compromise | North-south (phishing, exploit) |
| Internal recon | East-west (scanning internal hosts) |
| Lateral movement | East-west (moving between systems) |
| Privilege escalation | East-west (attacking internal services) |
| Data aggregation | East-west (collecting data from sources) |
| Exfiltration | North-south (sending data out) |

**Gaining east-west visibility:**

| Solution | Implementation |
|----------|----------------|
| **Network TAPs** | Physical traffic copying |
| **SPAN ports** | Switch port mirroring |
| **Internal sensors** | IDS/IPS within network |
| **Microsegmentation** | Firewall between segments |
| **Host-based agents** | EDR on each host |
| **Network flow analysis** | NetFlow/sFlow/IPFIX |

### IoT and OT Visibility Challenges

**Why IoT is problematic:**
```
IOT DEVICE CHARACTERISTICS:

Smart Thermostat:
├── Runs embedded Linux
├── Never receives patches
├── Default credentials
├── Cannot install agents
├── Minimal logging
├── Full network access
└── Nobody responsible for security

Compared to Managed Workstation:
├── IT-managed OS
├── Patch management
├── Changed credentials
├── EDR agent installed
├── Full logging
├── Segmented network
└── User accountable
```

**Common IoT categories:**

| Category | Examples | Risks |
|----------|----------|-------|
| **Building systems** | HVAC, elevators, access control | Exposed management interfaces |
| **Conferencing** | Smart TVs, room schedulers | Cameras/mics on network |
| **Office equipment** | Printers, copiers | Store sensitive documents |
| **Industrial** | PLCs, SCADA | Physical safety implications |
| **Consumer IoT** | Coffee makers, fridges | Unmanaged, never patched |

### BYOD Challenges

**The control spectrum:**
```
DEVICE CONTROL LEVELS:

CORPORATE-OWNED, MANAGED
├── Full control
├── MDM/EDR installed
├── Monitoring enabled
└── High visibility

CORP-OWNED, PERSONAL-ENABLED (COPE)
├── Most control
├── MDM installed
├── Some personal use
└── Good visibility

BRING YOUR OWN (BYOD) - MANAGED
├── Container/workspace approach
├── Work data segregated
├── Limited device control
└── Partial visibility

BRING YOUR OWN (BYOD) - UNMANAGED
├── No control
├── Just network access
├── Minimal visibility
└── HIGH RISK
```

**BYOD security approaches:**

| Approach | Implementation |
|----------|----------------|
| **Network segmentation** | BYOD devices on separate VLAN |
| **NAC (Network Access Control)** | Posture check before access |
| **Containerization** | Corporate apps in secure container |
| **VDI/VPN only** | No local data, virtual desktop |
| **Zero Trust** | Continuous verification, minimal trust |

---

## 3. Guided Practice

### Exercise 1: Visibility Gap Analysis

For each scenario, identify what's visible:

| Scenario | Firewall Sees? | EDR Sees? | SIEM Sees? |
|----------|---------------|-----------|------------|
| User downloads malware from internet | ___ | ___ | ___ |
| Attacker scans internal network | ___ | ___ | ___ |
| Data exfiltrated via HTTPS | ___ | ___ | ___ |
| New device plugged into network | ___ | ___ | ___ |
| Shadow cloud service accessed | ___ | ___ | ___ |

### Exercise 2: Shadow IT Discovery

Design a shadow IT discovery program:

1. What data sources would you use?
   - ___
   - ___
   - ___

2. What would you look for?
   - ___
   - ___

3. How would you respond to discoveries?
   - ___

### Exercise 3: IoT Risk Assessment

Rate these IoT devices by risk:

| Device | Risk (H/M/L) | Justification |
|--------|-------------|---------------|
| Conference room smart TV | ___ | ___ |
| Building access control system | ___ | ___ |
| Smart coffee maker | ___ | ___ |
| Network printer | ___ | ___ |
| HVAC control system | ___ | ___ |

---

## 4. Reflection Check

### Visibility Understanding
1. Your organization claims 95% asset inventory accuracy. Why is 5% unknown still a major problem?

2. Why does shadow IT exist even when IT provides similar services?

3. An attacker compromises a workstation and scans the internal network. Where in your logs would you see this?

### Practical Thinking
1. Marketing says they need their AWS account for "agility." How do you balance security with business needs?

2. The CFO's personal iPad is on the corporate WiFi. What's your visibility into this device?

3. You discover 40 IoT devices you didn't know existed. What's your first action?

---

## 5. Key Misconceptions

**MYTH: "Our firewall sees everything"**
REALITY: Firewalls see north-south traffic. East-west (internal) traffic bypasses them entirely.

**MYTH: "Shadow IT is just employees being difficult"**
REALITY: Shadow IT is usually a symptom of IT not meeting business needs. Fix the cause, not just the symptom.

**MYTH: "If it's on our network, we manage it"**
REALITY: IoT, BYOD, and shadow IT are on your network but unmanaged. Network presence ≠ visibility.

**MYTH: "BYOD is fine if we trust our employees"**
REALITY: Trust isn't the issue—malware on personal devices spreads to corporate network regardless of trust.

**MYTH: "We'll discover new assets during our annual audit"**
REALITY: Annual discovery is too slow. Continuous discovery is required for security relevance.

---

## 6. Completion Criteria

This module is complete when you can:

1. **Explain** why asset inventory is foundational to security
2. **Identify** shadow IT patterns and root causes
3. **Distinguish** between north-south and east-west visibility needs
4. **Assess** IoT and BYOD risks in enterprise environments
5. **Recommend** visibility improvement approaches

---

## 7. Further Depth (Optional)

*   **Framework:** CIS Control 1 (Inventory and Control of Enterprise Assets)
*   **Tool:** Explore Passive DNS and network flow analysis
*   **Practice:** Conduct a shadow IT discovery in your environment
*   **Research:** CASB solutions for cloud visibility
