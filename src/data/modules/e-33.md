# Infrastructure Attack Surface Overview

## 1. Unit Brief: The Foundation
While web apps get all the glory, they run on servers. Those servers run on networks. If you can hack the server directly (Infrastructure), you don't need to bypass the complex logic of the web app.

## 2. Real-World Relevance
*   **Web App**: Has a $500,000 WAF and strict input validation.
*   **Infrastructure**: The SSH port is open to the internet with the password `password123`.
*   **Attacker**: Chooses the path of least resistance (SSH).

## 3. Core Concepts

### External vs Internal Surface
*   **External**: What is visible from the internet (DMZ). Public IPs, Load Balancers, VPN Gateways.
*   **Internal**: What is visible once you abuse a VPN or Phishing email to get "inside". Printers, Active Directory, File Shares.

### Assets Management
You can't secure what you don't know you own.
*   Shadow IT: A developer spinning up an AWS instance on their personal credit card.
*   Forgotten Assets: The "Marketing 2018" server that hasn't been patched in 5 years.

## 4. Practical Examples

### Visualization (Shodan)
Search `org:"Target Company"`.
*   Result: 50 open IPs.
*   Port 21 (FTP): 5 servers.
*   Port 23 (Telnet): 1 server (Critical risk - plain text unencrypted protocol).

### Border Router Scanning
Scanning the main gateway IP.
*   It usually drops everything due to robust firewall rules.
*   Except Port 443 (VPN Gateway). This is the only way in.

## 5. Common Mistakes Beginners Make
*   **Focusing only on HTTP**: Pentesters often ignore Port numbers that aren't 80 or 443. Port 8080, 8443, 9000 often host vulnerable administrative consoles.
*   **Assuming Cloud is Secure**: An AWS Security Group configured to allow `0.0.0.0/0` on Port 3389 (RDP) is just as vulnerable as a physical server.

## 6. Key Takeaways
*   **The OS is the target**: Windows, Linux, network gear (Cisco).
*   **Patch Management**: The #1 defense against Infrastructure attacks. 
