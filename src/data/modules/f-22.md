# DNS and Name Resolution

## 1. Orientation

### What this module covers
This module covers the Domain Name System (DNS). The internet's phonebook that translates human names (`google.com`) into machine IPs (`142.250.72.14`).

### Fit in the Learning Path
Attackers abuse DNS constantly. They use it for command-and-control (DNS Tunneling), they poison it (Man-in-the-Middle), and they enumerate it to find hidden subdomains.

### Learning Objectives
By the end of this module, you should understand:
*   The **DNS Hierarchy** (Root, TLD, Authoritative).
*   **Record Types**: A, AAAA, CNAME, MX, TXT.
*   The **Hosts File**: The local override.

---

## 2. Core Content

### The Hierarchy
When you request `www.example.com`:
1.  **Browser Cache**: "Do I already know this?"
2.  **OS Cache / Hosts File**: "Did the user manually define this?"
3.  **Recursive Resolver**: (Usually your ISP or 8.8.8.8). "I will go find it."
4.  **Root Server (.)**: "I don't know, but I know who handles `.com`."
5.  **TLD Server (.com)**: "I don't know, but I know who handles `example.com`."
6.  **Authoritative Server**: "Yes, `www` is `93.184.216.34`."

### Critical Record Types
*   **A**: Maps Hostname -> IPv4. (The standard).
*   **AAAA**: Maps Hostname -> IPv6.
*   **CNAME** (Alias): Maps Hostname -> Another Hostname (`www` -> `server1`).
*   **MX**: Mail Exchange (Where to send emails). *Crucial for Phishing recon.*
*   **TXT**: Text notes. Used for verification (SPF, DMARC) or payloads.

---

## 3. Guided Practice

### Interrogating DNS
We will perform a manual lookup.

**Step 1: The 'nslookup' Tool**
Available on Windows and Linux.
```bash
nslookup google.com
```
*   **Output**: Server (Your DNS), Address (Result IPs).

**Step 2: Checking MX Records**
Let's see who handles email for Microsoft.
```bash
nslookup -type=mx microsoft.com
```
*   **Output**: You will see `microsoft-com.mail.protection.outlook.com`.

**Step 3: The Hosts File (The Local Override)**
*   **Windows**: `C:\Windows\System32\drivers\etc\hosts`
*   **Linux**: `/etc/hosts`
*   **Experiment**: If you add `127.0.0.1 facebook.com` to this file, you can block Facebook on your machine. The browser checks this file *before* asking the internet.

---

## 4. Reflection Check

1.  **Reconnaissance**: If I find a sub-domain named `dev.corp.com` via DNS, what does that tell me? (It's a development server, likely less secure).
2.  **Attacks**: If I can change your DNS Server setting to *my* IP, what can I do? (I can send you to a fake banking site when you type `bank.com`).
3.  **Privacy**: Do DNS queries normally travel encrypted? (No. Your ISP sees every domain you visit, even if using HTTPS. Hence: DNS-over-HTTPS).

---

## 5. Completion Criteria

This module is complete when:
1.  You have used `nslookup` to find an IP.
2.  You have identified the Mail Server of a public domain.
3.  You understand that DNS is just a distributed database of records.
