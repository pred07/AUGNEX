# Builder Capstone: Secure Architecture Design

## 1. Orientation

### What this module covers
This is the final exam for the Builder Path. You will design a secure banking infrastructure from the ground up, applying everything from IaC, Cloud, DevSecOps, and Detection.

### Learning Objectives
*   Design a **Defense-in-Depth** architecture.
*   Map controls to **NIST CSF** (Identify, Protect, Detect, Respond, Recover).
*   Produce a **Threat Model**.

---

## 2. Core Content

### The Requirements
**Client:** NeoBank.
**Workload:** Kubernetes Microservices.
**Data:** PII and Financial Transactions.
**Access:** Remote Engineers, Mobile App Users.

### The Architecture Layering
1.  **Network:** Hub-and-Spoke VNETs. WAF (Web Application Firewall) at edge. 3-Tier Private Subnets.
2.  **Compute:** GKE/EKS Clusters. Distroless detection. OPA (Open Policy Agent) Gatekeeper.
3.  **Pipeline:** Github Actions. Signed Commits. Image Scanning (Trivy). SLSA Level 3.
4.  **Identity:** Zero Trust Access to internal tools. MFA everywhere.
5.  **Data:** Envelope Encryption (KMS). Database Activity Monitoring.
6.  **Observability:** Central SIEM. Sysmon on Nodes. CloudTrail enabled.

### Threat Modeling (STRIDE)
*   **S**poofing: Mitigated by mTLS.
*   **T**ampering: Mitigated by Immutable Infrastructure.
*   **R**epudiation: Mitigated by Centralized Logging.
*   **I**nformation Disclosure: Mitigated by Encryption.
*   **D**enial of Service: Mitigated by Autoscaling + DDOS Shield.
*   **E**levation of Privilege: Mitigated by Least Privilege (RBAC).

---

## 3. Lab: The Defense Review

### Task
Review the proposed diagram.

**Finding 1:** Database is Publicly Accessible.
*   *Fix:* Move to Private Subnet. Use PrivateLink.
**Finding 2:** Devs SSH into Prod.
*   *Fix:* Remove SSH. Use SSM Session Manager / Ephemeral Access.
**Finding 3:** Secrets stored in Git.
*   *Fix:* Migrate to HashiCorp Vault / AWS Secrets Manager.

---

## 4. Final Words
Security Engineering is about enabling the business to run fast, safely. You are not the "Department of No". You are the "Department of How". Go build.
