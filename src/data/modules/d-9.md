# Windows Logging Fundamentals

## 1. Unit Brief: Event Viewer & EVTX
Windows uses a structured binary logging format called EVTX. It is robust but requires specific tools to read. The "Event Viewer" is the GUI, but real defenders use PowerShell or SIEMs.

## 2. Real-World Relevance
Windows is the target of 90% of corporate hacks. Mastering Windows Logs is mandatory.

## 3. Core Concepts

### Event Channels
*   **Application**: Crashes.
*   **Security**: Auditing (The most important).
*   **System**: Drivers/Services.
*   **Sysmon**: Advanced monitoring (Must be installed separately).

### Event IDs (The Critical Few)
You cannot read every log. Watch these:
*   **4624**: Logon Success.
*   **4625**: Logon Failure (Brute Force).
*   **4720**: User Created (Persistence).
*   **4672**: Admin Logon (Privilege).
*   **4688**: New Process Created (Execution).

### Audit Policy
By default, Windows logs very little. You must configure "Group Policy Audit Settings" to enable "Audit Process Tracking" or "Audit Logon Events".

## 4. Practical Examples

### Tracking Process Creation
If Audit Process Creation is on (Event 4688):
Msg: `A new process has been created.`
Process Name: `powershell.exe`
Creator Process: `winword.exe`
Command Line: `-enc aABha...`
*   **Conclusion**: Malware (Macro) spawned PowerShell.

### Querying with PowerShell
```powershell
Get-WinEvent -FilterHashtable @{LogName='Security'; ID=4625} | Select-Object -First 5
```
*   Shows the last 5 failed logins instantly.

## 5. Common Mistakes Beginners Make
*   **Not installing Sysmon**: Standard Windows logs miss detailed command line arguments and network connections. Sysmon provides this visibility.
*   **Log Rolling**: Default log size is small (20MB). Once full, it deletes old logs. Hackers know this and flood the log to hide tracks. Increase log size!

## 6. Key Takeaways
*   **IDs are Key**: Memorize the top 10 Event IDs.
*   **Sysmon is MVP**: Install it.
