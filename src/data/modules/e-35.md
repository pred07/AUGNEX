# Network Scanning Theory and Host Discovery

## 1. Unit Brief: Finding Life
Before you find ports, you must find hosts. In a network of 65,535 IPs (a /16 subnet), scanning every port on every IP will take years. Host Discovery (Ping Sweep) identifies which IPs are actually online.

## 2. Real-World Relevance
*   **Scenario**: Client gives you a `/16` range.
*   **Action**: Use `nmap -sn` (Ping Sweep) to reduce the target list from 65,000 IPs to the 400 that are online.
*   **Result**: You save days of time.

## 3. Core Concepts

### ICMP (Ping)
Sending an "Are you there?" packet.
*   *Problem*: Windows Firewall blocks ICMP by default. A host might be alive but silent.

### TCP/UDP Discovery
Sending empty packets to common ports (80, 443). If the host replies (even with a RST "Go Away"), it is alive.

### The Three-Way Handshake (TCP)
1.  **SYN**: "Hello?"
2.  **SYN-ACK**: "Hello, I am here." (Port Open).
3.  **ACK**: "Okay, thanks." (Connection Established).
*   **Stealth Scan (SYN Scan)**: You send SYN, get SYN-ACK, then send RST (Reset). You hang up before the connection is logged.

## 4. Practical Examples

### The Nmap Ping Sweep
```bash
$ nmap -sn 192.168.1.0/24
Nmap scan report for 192.168.1.1 (Host is up)
Nmap scan report for 192.168.1.55 (Host is up)
```
*   **-sn**: Ping scan only. No port scanning.

### Masscan
For internet-scale scanning.
```bash
$ masscan -p80 10.0.0.0/8 --rate=10000
```
*   Can scan the entire internet in minutes (if you have the bandwidth).

## 5. Common Mistakes Beginners Make
*   **Trusting Ping**: "It didn't ping, so it's offline." Wrong. The firewall just blocked the ECHO request. Use `-Pn` (Treat all hosts as online) if you suspect this.
*   **Scanning Localhost**: Trying to scan your own interface usually gives weird results.

## 6. Key Takeaways
*   **Discovery First**: Don't scan ports until you know the host exists.
*   **Firewalls Lie**: A lack of response doesn't always mean "dead".
