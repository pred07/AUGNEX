# Filesystems and Permissions

## 1. Orientation

### What this module covers
This module explores how data is stored and secured on the disk. We cover the structure of File Systems (NTFS vs Ext4) and the Permission logic that governs them.

### Fit in the Learning Path
If you cannot read a file, you cannot hack it. If you cannot execute a file, you cannot run your exploit. Understanding permissions is 50% of Linux/Windows privilege escalation.

### Learning Objectives
By the end of this module, you should understand:
*   The difference between **NTFS** (Windows) and **Ext4** (Linux).
*   How to read Linux permissions (`rwx`).
*   The concept of `root` vs `Administrator` in the context of file access.

---

## 2. Core Content

### The Filing Cabinet (Filesystems)
A hard drive is just a bucket of magnetic/electric bits. The **Filesystem** is the logic that organizes them into "Files" and "Folders".

1.  **NTFS (New Technology File System)**:
    *   **OS**: Windows.
    *   **Features**: ACLs (Access Control Lists), Journaling, Alternate Data Streams (Hidden data).
    *   **Case Insensitive**: `File.txt` == `file.txt`.

2.  **Ext4 (Fourth Extended Filesystem)**:
    *   **OS**: Linux.
    *   **Features**: Inodes, Journaling.
    *   **Case Sensitive**: `File.txt` != `file.txt`.

### Permissions Logic
Every file has an owner. The owner decides who else can touch it.

*   **Linux**:
    *   **Read (r)**: View contents.
    *   **Write (w)**: Modify/Delete contents.
    *   **Execute (x)**: Run as a program.
    *   **Scopes**: Owner (User), Group, Others (World).

*   **Windows**:
    *   Uses **ACLs**. Much more granular (Read, Write, List Folder, Modify, Full Control, Take Ownership).

---

## 3. Guided Practice

### Inspecting Linux Permissions
We will create a file and lock it down.

**Step 1: Create a Secret**
Open your terminal (Kali/Parrot or even WSL):
```bash
echo "Top Secret Data" > secret.txt
```

**Step 2: View Permissions**
Run:
```bash
ls -l secret.txt
```
*   Output example: `-rw-r--r-- 1 kali kali ...`
*   **Decoding**:
    *   `rw-`: Owner (kali) can Read/Write.
    *   `r--`: Group (kali) can Read only.
    *   `r--`: Everyone else can Read only.

**Step 3: Lock it Down**
We want *only* the owner to see it.
```bash
chmod 600 secret.txt
ls -l secret.txt
```
*   Output: `-rw-------`.
*   Now, if another user (except root) tries to `cat secret.txt`, they get **Permission Denied**.

---

## 4. Reflection Check

1.  **Forensics**: If you format a USB drive from NTFS to FAT32, what happens to the Permission data (ACLs)? (Hint: FAT32 doesn't support permissions).
2.  **Destruction**: If you have `Write` permission on a *Folder*, but NOT on a *File* inside it, can you delete the file? (Hint: Yes, usually. Deleting a file is updating the Folder's list).
3.  **Hidden Data**: Research "NTFS Alternate Data Streams". Can a file be hidden *behind* another file?

---

## 5. Completion Criteria

This module is complete when:
1.  You can explain why `chmod 777` is a security risk.
2.  You have successfully modified permissions on a file using `chmod`.
3.  You understand that different OSs use different Filesystem structures.
