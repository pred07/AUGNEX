# Linux Command Line Essentials

## 1. Orientation

### What this module covers
This module covers CLI navigation and filesystem fundamentals—the essential muscle memory that makes everything else possible. These skills are so fundamental that experienced professionals type them without conscious thought. You need to reach the same level of automaticity.

### Fit in the Learning Path
You cannot hack if you cannot navigate. Every exploitation, enumeration, and analysis task starts with moving through the filesystem, understanding where you are, and knowing what's around you.

### Learning Objectives
By the end of this module, you will:
*   Navigate the Linux filesystem with absolute and relative paths
*   Understand the directory hierarchy and its security implications
*   Use ls, cd, pwd, and path shortcuts fluently
*   Recognize what hidden files might be hiding

---

## 2. Core Content

### Mental Model: The Filesystem as a Tree

**How professionals think about this:**
The Linux filesystem is a single tree structure rooted at `/`. Everything—files, devices, virtual information—lives somewhere in this tree. Navigation means knowing where you are and where you need to go.

```
THE LINUX FILESYSTEM TREE:

                              /  (Root - the beginning)
                              │
        ┌────────┬────────┬───┴────┬────────┬────────┬────────┐
        │        │        │        │        │        │        │
      /bin    /etc    /home     /var    /tmp    /usr     /dev
    (binaries)(config)(users)  (logs)  (temp) (programs)(devices)
                        │
              ┌─────────┴─────────┐
              │                   │
         /home/kali         /home/bob
         (your home)        (other user)
              │
    ┌────┬────┴────┬────┐
    │    │         │    │
Documents Desktop .bashrc .ssh
                    (hidden - starts with .)
```

### Path Types

**Absolute paths:**
- Start with `/` (root)
- Unambiguous location regardless of current position
- Example: `/home/kali/Documents/notes.txt`

**Relative paths:**
- Start from current location
- Shorter but context-dependent
- Example: `Documents/notes.txt` (from /home/kali)

**Special path references:**

| Symbol | Meaning | Example |
|--------|---------|---------|
| `/` | Root of filesystem | `cd /` |
| `~` | Home directory | `cd ~` → `/home/kali` |
| `.` | Current directory | `./script.sh` |
| `..` | Parent directory | `cd ..` |
| `-` | Previous directory | `cd -` |

### The Essential Commands

**pwd - Print Working Directory:**
```bash
pwd
# Output: /home/kali/Documents
# "Where am I right now?"
```

**cd - Change Directory:**
```bash
cd /var/log          # Absolute: Go to /var/log
cd log               # Relative: Enter 'log' subdirectory
cd ..                # Go up one level
cd ../..             # Go up two levels
cd ~                 # Go home
cd -                 # Go to previous location
cd                   # Also goes home (implicit ~)
```

**ls - List Directory Contents:**
```bash
ls                   # Basic listing
ls -l                # Long format (permissions, size, dates)
ls -a                # Show hidden files (starting with .)
ls -la               # Combine: long format + hidden files
ls -lah              # Add human-readable sizes
ls -R                # Recursive (show subdirectories)
ls -lt               # Sort by modification time
```

### Reading ls -la Output

```
ls -la output decoded:

-rw-r--r--  1 kali kali   4096 Jan 15 10:30 file.txt
drwxr-xr-x  2 kali kali   4096 Jan 15 10:30 directory
lrwxrwxrwx  1 kali kali     11 Jan 15 10:30 link -> file.txt
-rwxr-xr-x  1 root root  10240 Jan 15 10:30 executable
│└───┬────┘ │  │    │      │         │          │
│    │      │  │    │      │         │          └── Filename
│    │      │  │    │      │         └── Timestamp
│    │      │  │    │      └── Size in bytes
│    │      │  │    └── Group owner
│    │      │  └── User owner
│    │      └── Hard link count
│    └── Permissions (owner/group/others)
└── File type: - (file), d (directory), l (link)
```

### Important Directories

| Directory | Purpose | Security Relevance |
|-----------|---------|-------------------|
| `/` | Root of everything | Root-owned, defines entire system |
| `/home` | User directories | User data, SSH keys, config |
| `/etc` | Configuration | passwd, shadow, service configs |
| `/var` | Variable data | Logs, web files, mail |
| `/var/log` | System logs | Investigation gold |
| `/tmp` | Temporary files | World-writable, often volatile |
| `/root` | Root's home | Privileged configuration |
| `/bin`, `/usr/bin` | Commands | What you can run |
| `/sbin`, `/usr/sbin` | System commands | Admin tools |
| `/opt` | Optional software | Third-party apps |
| `/proc` | Process info | Virtual, kernel data |
| `/dev` | Devices | Hardware access |

### Hidden Files

**Files starting with `.` are hidden by default:**

```bash
# Normal ls misses hidden files
ls
# Output: Documents Downloads

# ls -a shows everything
ls -a
# Output: .  ..  .bashrc  .ssh  Documents  Downloads

# Important hidden files:
# .bashrc     - Shell configuration
# .bash_history - Command history
# .ssh/       - SSH keys and known hosts
# .config/    - Application configs
```

**Security implication:**
Attackers hide malware in hidden directories:
```bash
# Attacker might create:
/tmp/.hidden_backdoor/
~/.malware/

# That's why ls -la should be habit
```

### Tab Completion and Shortcuts

**Tab completion:**
```bash
cd /ho<TAB>           # Completes to /home
cd /home/ka<TAB>      # Completes to /home/kali
cat /etc/pa<TAB>      # Shows: passwd passwd-
```

**History navigation:**
```bash
# Up/Down arrows - Previous commands
history               # Show command history
!100                 # Run command #100 from history
!!                   # Repeat last command
sudo !!              # Re-run last command with sudo
```

**Keyboard shortcuts:**
| Shortcut | Action |
|----------|--------|
| Ctrl+C | Cancel current command |
| Ctrl+L | Clear screen |
| Ctrl+A | Move to line start |
| Ctrl+E | Move to line end |
| Ctrl+R | Search command history |

---

## 3. Guided Practice

### Exercise 1: Navigation Drill

Execute this sequence and observe:

```bash
# Where are you?
pwd

# Go to root
cd /
ls -la

# Navigate to var logs
cd var/log
pwd

# Go back two levels
cd ../..
pwd

# Go home
cd ~
pwd

# Go to previous location
cd -
pwd
```

### Exercise 2: Hidden File Discovery

Find hidden files in your home:

```bash
cd ~

# Count hidden vs visible files
ls | wc -l              # Visible files
ls -a | wc -l           # All files (includes . and ..)

# Examine important hidden files
cat .bashrc | head -20
ls -la .ssh/            # If exists
cat .bash_history | tail -20
```

Questions:
1. How many hidden files in your home directory? ___
2. What's in your .bash_history? ___

### Exercise 3: Directory Exploration

Investigate key system directories:

```bash
# Configuration directory
ls /etc | head -20

# Can you read shadow file?
cat /etc/shadow
# What error do you get? ___

# Temporary directory
ls -la /tmp

# Binary directories
ls /bin | head -20
which python3
```

---

## 4. Reflection Check

### Navigation Understanding
1. You're at `/var/log`. What's the shortest command to go to `/home/kali`?

2. Why does `cd ..` from `/` still leave you at `/`?

3. You want to run a script in the current directory, but typing `script.sh` doesn't work. What's missing?

### Security Thinking
1. An attacker has created `/tmp/.X11-unix/../../../tmp/.backdoor`. Why this obfuscated path?

2. You're investigating a breach. Where do you look first and why?

3. Why should you use `ls -la` instead of `ls` as your default?

---

## 5. Key Misconceptions

**MYTH: "The filesystem starts at my home directory"**
REALITY: The filesystem starts at `/`. Your home directory is just where you land after login.

**MYTH: "Hidden files are a security feature"**
REALITY: Hidden files are a convenience feature to reduce clutter. Anyone with read permission can see them with `ls -a`.

**MYTH: "Tab just autocompletes"**
REALITY: Double-tab shows all options. Tab is also a security indicator—if Tab doesn't complete, the file/path may not exist.

**MYTH: "cd / and cd ~ are the same"**
REALITY: `/` is the filesystem root (top level). `~` is your home directory (probably `/home/username`).

**MYTH: "Relative paths are worse than absolute paths"**
REALITY: Each has its use. Relative paths are shorter; absolute paths are unambiguous across contexts.

---

## 6. Completion Criteria

This module is complete when you can:

1. **Navigate** to any directory using both absolute and relative paths
2. **List** directory contents with appropriate detail using ls options
3. **Identify** hidden files and explain why they're "hidden"
4. **Explain** the purpose of key system directories
5. **Use** keyboard shortcuts and tab completion efficiently

---

## 7. Further Depth (Optional)

*   **Practice:** Navigate through the entire filesystem structure
*   **Challenge:** Find all hidden directories in /tmp
*   **Research:** Study the Filesystem Hierarchy Standard (FHS)
*   **Habit:** Force yourself to use ls -la for a week until it's automatic
