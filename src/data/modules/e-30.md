# API Security Testing Fundamentals

## 1. Unit Brief: The Machine Interface
APIs (REST, GraphQL) are the backend logic exposed to the world. They often lack the protections present in the web UI (like CSRF tokens) and expose more data than they should.

## 2. Real-World Relevance
*   **Leaky API**: `GET /api/users/1` returns `{"id": 1, "name": "Bob", "password_hash": "...", "admin": false}`. The UI only shows the name, but the API sends everything.
*   **Broken Object Level Authorization (BOLA)**: The API equivalent of IDOR.

## 3. Core Concepts

### OWASP API Top 10
A specific list for APIs.
1.  **BOLA**: IDOR for objects.
2.  **Broken Auth**: Weak tokens.
3.  **Mass Assignment**: Modifying read-only properties (like `is_admin`).
4.  **Excessive Data Exposure**: Sending too much info.

### GraphQL
A query language for APIs. "Ask for what you need".
*   **Introspection**: Asking the API to verify its schema. `__schema { types { name } }`.
*   **Attack**: Introspection often reveals hidden ("Shadow") API endpoints.

## 4. Practical Examples

### Mass Assignment
`POST /api/register`
Body: `{"user": "bob", "pass": "123"}`
*   **Attack**: `{"user": "bob", "pass": "123", "role": "admin"}`.
*   **Result**: Many frameworks automatically bind JSON fields to database columns. If "role" exists in the DB, it gets updated.

### Excessive Data Exposure
You check the network traffic of a "Find Friends" feature.
The response is 5MB large.
It contains the location data of all users, even though the app only displays their names.

## 5. Common Mistakes Beginners Make
*   **Treating APIs like Websites**: They don't have cookies (usually). They use Bearer tokens.
*   **Not testing HTTP Verbs**: `GET` might be blocked, but `DELETE` might work on the same endpoint.

## 6. Key Takeaways
*   **Intercept Everything**: The mobile app is just a GUI for the API. Front the proxy.
*   **Fuzz parameters**: APIs often have hidden sort/filter parameters that are vulnerable to SQLi.
