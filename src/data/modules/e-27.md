# Server-Side Request Forgery (SSRF)

## 1. Orientation

### What this module covers
This module covers **SSRF**. Tricking the server into making a request on your behalf. "Hey server, fetch this URL for me."

### Fit in the Learning Path
SSRF is the key to cloud hacking. It allows you to hit the **Metadata Service** (`169.254.169.254`) and steal AWS keys.

### Learning Objectives
By the end of this module, you should understand:
*   **Blind** vs **Non-Blind** SSRF.
*   The **Cloud Metadata** attack vector.
*   Intranet scanning via SSRF.

---

## 2. Core Content

### The Mechanism
Feature: "Import Profile from URL".
User enters: `http://google.com/image.png`.
Server fetches it.

**Attack**:
User enters: `http://localhost:22`.
Server connects to its own SSH port.
*   *Result*: You can port scan the internal network FROM the server.

### The Cloud Kill Chain
User enters: `http://169.254.169.254/latest/meta-data/iam/security-credentials/`
Server fetches AWS credentials.
Attacker uses credentials to take over the account.

---

## 3. Guided Practice

### Identifying SSRF Candidates
Look for parameters that take a URL.
*   `?url=`
*   `?feed=`
*   `?proxy=`
*   `?webhook=`

### Filter Bypass
Devs block `127.0.0.1`.
**Bypasses**:
*   `2130706433` (Integer IP).
*   `0x7f000001` (Hex IP).
*   `sudo.co.il` (DNS resolves to 127.0.0.1).
*   `[::1]` (IPv6).

---

## 4. Reflection Check

1.  **Impact**: Why is SSRF critical in modern connection? (Microservices. The server typically has trust relations with other internal services that you can't reach from the internet).
2.  **Blind**: If the server fetches the URL but doesn't show me the response, is it useless? (No. It's **Blind SSRF**. You can still trigger actions or time-base scan internal ports).
3.  **Protocol**: Does SSRF only work with HTTP? (No. `gopher://`, `file://`, `ftp://` can often be used).

---

## 5. Completion Criteria

This module is complete when:
1.  You memorize the IP `169.254.169.254`.
2.  You understand that SSRF turns the Target Server into a Proxy.
3.  You look at every "Import via URL" feature with suspicion.
