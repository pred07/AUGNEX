# Automating the Purple Team

## 1. Orientation

### What this module covers
This module covers **SOAR** (Security Orchestration, Automation, and Response) applied to testing.

### Fit in the Learning Path
Once you know the process, automate it. Humans are slow and sleep; scripts don't.

### Learning Objectives
By the end of this module, you should understand:
*   **CI/CD for Detection**.
*   **Auto-Validation**.
*   **Regression Pipelines**.

---

## 2. Core Content

### The Pipeline
Code Repository (Git) -> CI Server (Jenkins/GitHub Actions) -> SIEM.
1.  **Commit**: Analyst pushes a new Rule (`.yaml`).
2.  **Test**: CI Server runs an Atomic Red Team test against a lab VM.
3.  **Validate**: CI checks if the alert fired.
4.  **Deploy**: If Pass, push to Prod SIEM.

### "Detection as Code"
Treat your security rules exactly like software. Version control, peer review, automated testing.

---

## 3. Guided Practice

### Building a Simple Check
**Script**: `validate_rule.py`.
1.  Triggers `alert_test`.
2.  Queries SIEM API for `alert_name`.
3.  Returns `True` if found.

**Task**: Integrate this into a Git pre-commit hook.

---

## 4. Reflection Check

1.  **Trust**: Do you trust the robot to block IPs? (Start with "Alert Only", graduate to "Block").
2.  **Maintenance**: Automation code needs maintenance too.
3.  **Speed**: A fully automated pipeline can deploy a new detection in minutes globally.

---

## 5. Completion Criteria

This module is complete when:
1.  You treat **Detections as Code**.
2.  You understand the **CI/CD Pipeline** concept.
3.  You automate the **Validation Step**.
