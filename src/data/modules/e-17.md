# Web Application Attack Surface Mapping

## 1. Unit Brief: Mapping the Terrain
Before you attack a specific vulnerability, you must map the entire application. Every input field, every URL parameter, every HTTP header, and every API endpoint is a potential entry point.

## 2. Real-World Relevance
A thorough pentester spends 4 hours mapping and 1 hour exploiting. A master maps 100% of the app. A novice maps 20% and misses the critical bug in the "Change Email" setting.

## 3. Core Concepts

### Spidering (Crawling)
Automated browsing to find all links on the site.
*   **Burp Spider**: Legacy tool, now "Discover Content".
*   **OWASP ZAP Spider**: Fills the site map tree.

### Parameter Analysis
The real attack surface is in the parameters.
*   `GET /search?q=test` -> Injection?
*   `POST /update` body: `user_id=5&role=user` -> Mass Assignment (Change role to admin)?

### Route Discovery (Single Page Apps)
In React/Vue apps, the server doesn't send HTML pages. The "routes" are defined in a stored JavaScript file (e.g., `main.js`).
*   *Technique*: Regex search the JS files for paths like `/api/v1/admin`.

## 4. Practical Examples

### Hidden Parameters
You see a form with "Username" and "Password".
Inspect the HTML source:
```html
<input type="text" name="username">
<input type="password" name="password">
<input type="hidden" name="debug_mode" value="false">
```
*   **Attack**: Change `debug_mode` to `true`.
*   **Result**: The application dumps verbose error logs or bypasses auth checks.

### API Endpoint Guessing
You see `/api/user/get_profile`.
*   **Hypothesis**: Does `/api/user/get_all_users` exist?
*   **Hypothesis**: Does `/api/admin/get_profile` exist?
*   **Action**: Test it (Fuzzing).

## 5. Common Mistakes Beginners Make
*   **Ignoring JS Files**: Reading the bundled JavaScript often reveals API endpoints the UI doesn't show you yet (like "Future Admin Features").
*   **Stopping at the UI**: If the UI disables a button, the API endpoint usually still works. Use Burp Repeater.

## 6. Key Takeaways
*   **Map First, Shoot Later**: You can't hack what you haven't found.
*   **Inputs are deceptive**: Headers, Cookies, and Hidden Fields are all inputs.
