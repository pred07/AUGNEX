# Common Network Services Attacks (SMB, FTP, SSH, RDP)

## 1. Unit Brief: The Big Four
Certain protocols appear on almost every network. Knowing how to attack SMB (Windows File Share), FTP (File Transfer), SSH (Remote Shell), and RDP (Remote Desktop) is mandatory for any pentester.

## 2. Real-World Relevance
*   **SMB**: The vector for Ransomware (WannaCry) and typical Windows lateral movement.
*   **FTP**: Often supports "Anonymous" login, leaking sensitive files.

## 3. Core Concepts

### SMB (Port 445)
*   **Null Session**: Logging in with no username and no password. (Old bug, still exists).
*   **Signing Not Required**: Allows NTLM Relay attacks (Man-in-the-Middle).
*   **EternalBlue**: The famous exploit for unpatched Windows 7/2008.

### FTP (Port 21)
*   **Anonymous Login**: User: `anonymous`, Password: `anonymous`.
*   **Cleartext**: Sniffing credentials off the wire (Wireshark) works because FTP doesn't encrypt.

### SSH (Port 22)
*   **Weak Credentials**: `root:root`, `admin:admin`.
*   **Key Mismanagement**: Finding a private key (`id_rsa`) on a file share allows login without a password.

### RDP (Port 3389)
*   **BlueKeep**: Critical RCE vulnerability in older RDP.
*   **Screenshotting**: Tools can take a screenshot of the login screen to see valid usernames (if displayed).

## 4. Practical Examples

### Enumerating SMB
```bash
$ crackmapexec smb 192.168.1.0/24
SMB      192.168.1.5     445    WIN10     [*] Windows 10.0 Build 19041 x64 (name:WIN10) (domain:WORKGROUP) (signing:False) (SMBv1:False)
```
*   **Intel**: Signing is False. Safe to relay.

### Bruteforcing SSH
```bash
$ hydra -l root -P /usr/share/wordlists/rockyou.txt ssh://192.168.1.10
```

## 5. Common Mistakes Beginners Make
*   **Locking Accounts**: Running Hydra too fast on SSH/RDP will lock the Active Directory account, alerting the Blue Team and denying you access.
*   **Ignoring SMB**: It is the most valuable protocol on a Windows network. Every file share lives here.

## 6. Key Takeaways
*   **Check Anonymous**: Always try to login for free.
*   **Sniffing**: FTP/Telnet/HTTP are dangerous because they are readable on the wire.
